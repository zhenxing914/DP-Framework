webpackJsonp([1],{0:function(e,t,n){n(936),e.exports=n(1232)},1232:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(90),a=r(o),u=n(242),i=r(u),l=n(1233),s=n(1287),c=n(1296),f=r(c),d=n(1331),p=r(d),m=n(1334),y=r(m),h=n(1338),b=r(h),v=n(1358),g=r(v);n(1360),n(1362),n(1368),n(1370),n(1372);var O="",w=function(e,t,n){(0,s.Request)("/homeapi/usrcenter/isLogin").then(function(e){O=JSON.parse(e.respBody.message),O.fullname&&(0,s.setCookie)("fullname",O.fullname),n()})},E=function(e,t,n){O.isLogin?n():window.location.href="/log?fromUrl="+window.location.href};i.default.render(a.default.createElement(l.Router,{history:l.browserHistory},a.default.createElement(l.Route,{path:"/",component:f.default,onEnter:w},a.default.createElement(l.IndexRedirect,{to:"form/formSearch"}),a.default.createElement(l.Route,{path:"log",component:p.default}),a.default.createElement(l.Route,{path:"form",component:y.default,onEnter:E},a.default.createElement(l.Route,{path:"formSearch",component:b.default}),a.default.createElement(l.Route,{path:"formSubmit",component:g.default})))),document.querySelector(".container"))},1296:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):o(e,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(90),c=r(s),f=n(1297),d=function(e){function t(e){return a(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(){var e={key:"/",value:c.default.createElement("span",{className:"icon-telecom-logo"})};return c.default.createElement("div",{className:"content"},"/log"!=window.location.pathname&&c.default.createElement(f.Header,{icon:e}),this.props.children)}}]),t}(c.default.Component);t.default=d},1297:function(e,t,n){"use strict";e.exports.Footer=n(1298),e.exports.Header=n(1299),e.exports.Login=n(1315)},1298:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":l(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):o(e,t))}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(90),c=r(s),f=function(e){function t(n){return a(this,t),u(this,e.call(this,n))}return i(t,e),t.prototype.render=function(){var e=this.props.prefixCls;return c["default"].createElement("div",{className:e+"-footer"},c["default"].createElement("div",{className:e+"-copy"},"Copyright ",c["default"].createElement("span",null,"©2015-2017")))},t}(c["default"].Component);t["default"]=f,f.propTypes={prefixCls:s.PropTypes.string.isRequired},f.defaultProps={prefixCls:"DPUI-Footer"},e.exports=t["default"]},1299:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":l(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):o(e,t))}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var s=(n(1300),n(638)),c=r(s),f=(n(1307),n(351)),d=r(f),p=(n(1310),n(633)),m=r(p),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=n(90),b=r(h),v=n(1313),g=(r(v),n(1314)),O=n(1287),w=function(e){function t(n){a(this,t);var r=u(this,e.call(this,n));return r.state={orderCount:0,msgCount:0,leftMenu:[],rightMenu:[]},r.renderMenu=r.renderMenu.bind(r),r.handleRoute=r.handleRoute.bind(r),r}return i(t,e),t.prototype.componentWillMount=function(){var e=(0,O.getCookie)("headerMenus");if(!e)return console.warn("HeaderMenus undefined"),!1;try{var t=JSON.parse(e);if(!t.length)return console.warn("HeaderMenus has nothing"),!1;this.setState({leftMenu:t[0],rightMenu:t[1]})}catch(e){throw"Bad Format of HeaderMenus"}},t.prototype.componentDidMount=function(){var e=this;this.orderPolling=setInterval(function(){(0,g.countProcessingList)().then(function(t){(0,O.resolve)(t,function(t){e.setState({orderCount:t})},function(e){m["default"].error(e)})})},1500),this.msgPolling=setInterval(function(){(0,g.countMessages)().then(function(t){(0,O.resolve)(t,function(t){e.setState({msgCount:t.msgUnreaded})},function(e){m["default"].error(e)})})},1500)},t.prototype.componentWillUnmount=function(){clearInterval(this.orderPolling),clearInterval(this.msgPolling)},t.prototype.handleRoute=function(e){new RegExp("logout").test(e.key)?(0,g.logout)().then(function(e){(0,O.resolve)(e,function(e){m["default"].success(e)},function(e){m["default"].error(e)})}):window.location.href=e.key},t.prototype.renderMenu=function(e){var t=this,n=this.props.prefixCls,r=window.location.origin;return e.map(function(e){if(e.key==r+"/order/myOrder")return b["default"].createElement(c["default"].Item,{key:e.key,className:n+"-font"},b["default"].createElement(d["default"],{count:t.state.orderCount,overflowCount:99},e.value));if(e.key==r+"/message")return b["default"].createElement(c["default"].Item,{key:e.key,className:n+"-font"},b["default"].createElement(d["default"],{count:t.state.msgCount,overflowCount:99},e.value));if(e.children){var o=e.children.length;return b["default"].createElement(c["default"].SubMenu,{key:e.key,className:n+"-font "+n+"-sub-menu "+n+"-col-"+o,title:"PLACEHOlD"==e.value?(0,O.getCookie)("fullname"):e.value},e.children.map(function(e){return b["default"].createElement(c["default"].ItemGroup,{key:e.value,title:e.value,className:n+"-sub-itemGroup"},e.children.map(function(e){return b["default"].createElement(c["default"].Item,{key:e.key,className:n+"-sub-item"},e.value)}))}))}return b["default"].createElement(c["default"].Item,{key:e.key,className:n+"-font"},e.value)})},t.prototype.render=function(){var e=y({},this.props),t=e.prefixCls,n=e.icon,r=e.leftSelectKeys,o=e.rightSelectKeys,a=e.defaultLeftSelectKeys,u=e.defaultRightSelectKeys;delete e.prefixCls;var i=r?{selectedKeys:r}:"",l=o?{selectedKeys:o}:"";return b["default"].createElement("div",{className:t+"-nav"},b["default"].createElement(c["default"],y({className:t+"-background",mode:"horizontal"},i,{onClick:this.handleRoute,defaultSelectedKeys:a},e),b["default"].createElement(c["default"].Item,{key:n.key,className:t+"-offset "+t+"-font"},n.value),this.renderMenu(this.state.leftMenu)),b["default"].createElement("div",{className:t+"-position"},b["default"].createElement(c["default"],y({className:t+"-background "+t+"-right",mode:"horizontal"},l,{onClick:this.handleRoute,defaultSelectedKeys:u},e),this.renderMenu(this.state.rightMenu))))},t}(b["default"].Component);t["default"]=w,w.propTypes={prefixCls:h.PropTypes.string.isRequired,icon:h.PropTypes.object.isRequired,leftSelectKeys:h.PropTypes.array,rightSelectKeys:h.PropTypes.array,defaultLeftSelectKeys:h.PropTypes.array,defaultRightSelectKeys:h.PropTypes.array},w.defaultProps={prefixCls:"DPUI-Header"},e.exports=t["default"]},1314:function(e,t,n){"use strict";function r(){return(0,u.Request)("/homeapi/workorder/countProcessingList")}function o(){return(0,u.Request)("/homeapi/msgcenter/msgs?msgType=ALL")}function a(){return(0,u.Request)("/homeapi/usrcenter/logout")}Object.defineProperty(t,"__esModule",{value:!0}),t.countProcessingList=r,t.countMessages=o,t.logout=a;var u=n(1287)},1315:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":l(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):o(e,t))}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var s=(n(1316),n(359)),c=r(s),f=(n(1319),n(535)),d=r(f),p=(n(1322),n(582)),m=r(p),y=(n(1328),n(342)),h=r(y),b=(n(1310),n(633)),v=r(b),g=n(90),O=r(g),w=n(1287),E=function(e){function t(n){a(this,t);var r=u(this,e.call(this,n));return r.handleSubmit=r.handleSubmit.bind(r),r.toRegister=r.toRegister.bind(r),r.toFindPassword=r.toFindPassword.bind(r),r.state={},r}return i(t,e),t.prototype.toRegister=function(){window.location.href=""+this.props.origin+this.props.registerPathname},t.prototype.toFindPassword=function(){window.location.href=""+this.props.origin+this.props.findPasswordPathname+"?loginUrl="+window.location.href},t.prototype.toFromUrl=function(e){window.location.href=""+this.props.fromUrl+(this.props.fromUrl.includes("?")?"&":"?")+"authKey="+e},t.prototype.getMenuList=function(e){var t={subsys:e};return(0,w.Request)(this.props.menuApi,{method:"POST",body:t}).then(function(e){(0,w.setCookie)("headerMenus",JSON.stringify(e.respBody.message))})},t.prototype.getMenuList=function(e){var t={subsys:e};return(0,w.Request)(this.props.menuApi,{method:"POST",body:t}).then(function(e){(0,w.setCookie)("headerMenus",JSON.stringify(e.respBody.message))})},t.prototype.handleSubmit=function(e){var t=this;e.preventDefault();var n=this.props.form,r=n.getFieldsValue(),o=r.nameOrEmail,a=r.password,u=r.remember,i=this.props,l=i.fromUrl,s=i.appName,c=i.subsys,f=i.menuList,d=i.getMenu,p={nameOrEmail:o,password:a,fromUrl:l,appName:s,subsys:c};this.props.form.validateFields(function(e,n){e||fetch(t.props.loginApi,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).then(function(e){return e.json()}).then(function(e){29901!==e.code?v["default"].error(e.message):(u?(0,w.setCookie)("todp-user",o):(0,w.delCookie)("todp-user"),(0,w.setCookie)("authKey",e.data.authKey),d?f.length?((0,w.setCookie)("headerMenus",JSON.stringify(f)),t.toFromUrl(e.data.authKey)):t.getMenuList(c).then(function(){t.toFromUrl(e.data.authKey)}):t.toFromUrl(e.data.authKey))})})},t.prototype.render=function(){var e=this.props.form.getFieldDecorator,t=this.props,n=t.prefixCls,r=t.styleName,o=t.className;t.backgroundColor;return O["default"].createElement("div",{className:n+"-login "+o,styleName:r},O["default"].createElement(m["default"],{onSubmit:this.handleSubmit},O["default"].createElement(m["default"].Item,null,e("nameOrEmail",{rules:[{required:!0,message:"请输入用户名或邮箱"},{pattern:/^[a-z]+[a-z0-9_]+$|^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$|^1[3|4|5|7|8][0-9]{9}$/,message:"用户名/邮箱/手机号格式不正确"}],initialValue:(0,w.getCookie)("todp-user")})(O["default"].createElement(h["default"],{placeholder:"请输入用户名/邮箱/手机号"}))),O["default"].createElement(m["default"].Item,{className:n+"-margin"},e("password",{rules:[{required:!0,message:"请输入密码"}]})(O["default"].createElement(h["default"],{type:"password",placeholder:"请输入密码"}))),O["default"].createElement(m["default"].Item,null,e("remember",{valuePropName:"checked",initialValue:!0})(O["default"].createElement(d["default"],null,"记住我")),O["default"].createElement(c["default"],{type:"primary",htmlType:"submit",className:n+"-button"},"登录"))),O["default"].createElement("div",{className:n+"-link"},O["default"].createElement("a",{href:"javascript:;",className:n+"-left",onClick:this.toRegister.bind(this)},"立即注册"),O["default"].createElement("a",{href:"javascript:;",className:n+"-right",onClick:this.toFindPassword.bind(this)},"忘记密码?")))},t}(O["default"].Component);E.propTypes={prefixCls:g.PropTypes.string.isRequired,styleName:g.PropTypes.string,className:g.PropTypes.string,fromUrl:g.PropTypes.string.isRequired,origin:g.PropTypes.string,findPasswordPathname:g.PropTypes.string.isRequired,registerPathname:g.PropTypes.string.isRequired,appName:g.PropTypes.string.isRequired,subsys:g.PropTypes.string.isRequired,loginApi:g.PropTypes.string.isRequired,menuApi:g.PropTypes.string.isRequired,menuList:g.PropTypes.array,getMenu:g.PropTypes.bool.isRequired},E.defaultProps={prefixCls:"DPUI-Login",styleName:"",className:"",fromUrl:"",origin:window.location.origin,findPasswordPathname:"/findPassword",registerPathname:"/register",appName:"",subsys:"",loginApi:"/authapi/login",menuApi:"/authapidev/menuInfo/getMenuList",menuList:[],getMenu:!0};var k=m["default"].create()(E);t["default"]=k,e.exports=t["default"]},1331:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):o(e,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(90),c=r(s),f=n(1297),d=n(1332),p=r(d),m=n(1333),y=r(m),h=function(e){function t(){return a(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return i(t,e),l(t,[{key:"render",value:function(){var e="http://localhost:8080",t="http://localhost:8080",n=[[{key:t+"/console",value:"总览"},{key:t+"/product",value:"产品服务",children:[{value:"大数据产品",children:[{key:t+"/product/offlineAnalysis",value:"数据工厂"},{key:t+"/product/intelligentScheduling",value:"智能调度"}]},{value:"数据服务",children:[{key:t+"/product/positionService",value:"位置服务"}]}]},{key:t+"/documents",value:"文档支持",children:[{value:null,children:[{key:t+"/documents/index?key=guid",value:"入门指南"},{key:t+"/documents/index?key=document",value:"产品文档"},{key:t+"/documents/index?key=faq",value:"常见问题"},{key:t+"/documents/index?key=support",value:"技术支持"}]}]}],[{key:t+"/user",value:"PLACEHOlD",children:[{value:null,children:[{key:t+"/userCenter",value:"用户中心"},{key:t+"/logout",value:"退出"}]}]},{key:t+"/order/myOrder",value:"工单"},{key:t+"/message",value:"通知"}]];return c.default.createElement("div",{className:"login-iframe background"},c.default.createElement("div",{className:"iframe-icon"},c.default.createElement("span",{className:"icon-telecom-logo iframe-icon-inner"})),c.default.createElement("div",{className:"background-img"},c.default.createElement("img",{src:p.default,alt:""})),c.default.createElement("div",{className:"iframe-wrapper iframe-position"},c.default.createElement(f.Login,{fromUrl:e,appName:"todp",subsys:"todp_web",menuList:n})),c.default.createElement("img",{src:y.default,alt:"",className:"footer"}))}}]),t}(c.default.Component);t.default=h},1332:function(e,t,n){e.exports=n.p+"images/6217b943.login.png"},1333:function(e,t,n){e.exports=n.p+"images/e28cae2e.title.jpg"},1334:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):o(e,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=(n(1300),n(638)),s=r(l),c=(n(1335),n(356)),f=r(c),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(90),m=r(p),y=n(1233),h={form:"表单示例",formSearch:"表单查找",formSubmit:"表单提交"},b=function(e){function t(){a(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={selectedKey:window.location.pathname},e.handleClick=e.handleClick.bind(e),e}return i(t,e),d(t,[{key:"handleClick",value:function(e){this.setState({selectedKey:e.key})}},{key:"renderBreadcrumb",value:function(){var e=window.location.pathname.split("/");return e.shift(),e.map(function(e){return m.default.createElement(f.default.Item,{className:"form-breadcrumb"},h[e])})}},{key:"render",value:function(){return m.default.createElement("div",{className:"form"},m.default.createElement(s.default,{theme:"dark",onClick:this.handleClick,className:"form-sidebar",selectedKeys:[this.state.selectedKey],mode:"inline"},m.default.createElement(s.default.Item,{key:"/form/formSearch"},m.default.createElement(y.Link,{to:"/form/formSearch"},"表单查找")),m.default.createElement(s.default.Item,{key:"/form/formSubmit"},m.default.createElement(y.Link,{to:"/form/formSubmit"},"表单提交"))),m.default.createElement("div",{className:"form-content"},m.default.createElement(f.default,null,this.renderBreadcrumb()),this.props.children))}}]),t}(m.default.Component);t.default=b},1335:function(e,t,n){"use strict";n(1301),n(1336)},1336:function(e,t){},1338:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):o(e,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=(n(1339),n(692)),s=r(l),c=(n(1328),n(342)),f=r(c),d=(n(1345),n(576)),p=r(d),m=(n(1357),n(348)),y=r(m),h=(n(1300),n(638)),b=r(h),v=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&i["return"]&&i["return"]()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),O=n(90),w=r(O),E=n(363),k=r(E),P=n(1287),S=function(){return{" ":"全部",RUNNING:"处理中",WAIT_ADD:"待客户补充",WAIT_CONFIRM:"待客户确认",COMPLETE:"已完成",CANCEL:"已撤销"}},C=function(e){function t(e){a(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=n,o=w.default.createElement(b.default,{onClick:n.chooseStatus.bind(r)},Object.entries(S()).map(function(e){return w.default.createElement(b.default.Item,{key:e[0]},e[1])}));return n.state={tds:[],loading:!1,visible:!1,totalCount:0,query:"",pageId:1,orderStatus:"",columns:[{title:"工单编号",dataIndex:"id",key:"id",sorter:function(e,t){return e.id-t.id}},{title:"相关产品与服务",dataIndex:"module",key:"module"},{title:"问题标题",dataIndex:"title",key:"title"},{title:w.default.createElement(p.default,{overlay:o},w.default.createElement("div",{className:"form-search-switch-status"},"状态",w.default.createElement(y.default,{type:"caret-down"}))),dataIndex:"status",key:"status"},{title:"提交时间",dataIndex:"gmtCreated",key:"gmtCreated",sorter:function(e,t){return new Date(e.gmtCreated).valueOf()-new Date(t.gmtCreated).valueOf()}},{title:"操作",dataIndex:"operation",key:"operation",render:function(e,t){return w.default.createElement("span",null,w.default.createElement("a",{key:e,onClick:function(){return n.checkDetails(e,t)},className:"form-search-operation-position"},e[0]))}}]},n.setQuery=n.setQuery.bind(n),n.conditionQuery=n.conditionQuery.bind(n),n.conditionQueryByEnter=n.conditionQueryByEnter.bind(n),n.checkDetails=n.checkDetails.bind(n),n.getOrderList=n.getOrderList.bind(n),n}return i(t,e),g(t,[{key:"setQuery",value:function(e){this.setState({query:e.target.value})}},{key:"getOrderList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0";this.setState({loading:!0}),(0,P.Request)("/homeapi/workorder/getList",{method:"POST",headers:{"Content-Type":"application/json"},body:{page:e,status:t,searchContent:encodeURIComponent(r),subModuleId:o}}).then(function(e){n.setState({loading:!1});var t=n;(0,P.resolve)(e,function(){var n=[];e.respBody.message.workOrderList.forEach(function(e){var t={},r=!0,o=!1,a=void 0;try{for(var u,i=Object.entries(e)[Symbol.iterator]();!(r=(u=i.next()).done);r=!0){var l=v(u.value,2),s=l[0],c=l[1];switch(s){case"status":var f=(!!["COMPLETE","CANCEL"].includes(c),"●"+S()[c]),d="COMPLETE"==c?"#22c202":"#ff0000";t[s]=w.default.createElement("span",{style:{color:d}},f);break;case"id":t[s]=("000000000"+c).substr(-9);break;case"gmtCreated":t[s]=(0,k.default)(c).format("YYYY-MM-DD HH:mm:ss");break;case"title":t[s]=c.length>7?c.substr(0,7)+"……":c;break;default:t[s]=c}}}catch(e){o=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(o)throw a}}t["key"]=t["id"],t["module"]=t["module"]+"/"+t["subModule"],t["operation"]=["查看"],n.push(t)}),t.setState({tds:n,totalCount:e.respBody.message.totalCount})})})}},{key:"conditionQuery",value:function(){this.getOrderList(this.state.page,this.state.orderStatus,this.state.query)}},{key:"conditionQueryByEnter",value:function(e){13==e.charCode&&this.conditionQuery()}},{key:"chooseStatus",value:function(e){this.setState({orderStatus:e.key}),this.getOrderList(this.state.page,e.key,this.state.query)}},{key:"checkDetails",value:function(){console.log("test")}},{key:"componentWillMount",value:function(){this.getOrderList()}},{key:"render",value:function(){var e=this,t={total:this.state.totalCount,pageSize:10,current:this.state.pageId,onChange:function(t){e.setState({pageId:t}),e.getOrderList(t,e.state.orderStatus,e.state.query)}},n=10*this.state.pageId-9,r=10*this.state.pageId<this.state.totalCount?10*this.state.pageId:this.state.totalCount;return w.default.createElement("div",{className:"form-search"},w.default.createElement("div",{className:"form-search-title"},"表单查找"),w.default.createElement("div",{className:"form-search-content"},w.default.createElement("div",{className:"form-search-input-search"},w.default.createElement(f.default,{addonAfter:w.default.createElement("span",{className:"form-search-hover",onClick:this.conditionQuery},"查询"),onKeyPress:this.conditionQueryByEnter,onChange:this.setQuery,placeholder:"工单号/问题标题/问题描述关键词"})),w.default.createElement(s.default,{columns:this.state.columns,dataSource:this.state.tds,loading:this.state.loading,pagination:t}),!!this.state.totalCount&&w.default.createElement("div",{className:"form-search-table-supply"},"显示第"+n+"到第"+r+"项结果，共"+this.state.totalCount+"项")))}}]),t}(w.default.Component);t.default=C},1339:function(e,t,n){"use strict";n(1301),n(1340),n(1342),n(1319),n(1345),n(1348),n(1351)},1340:function(e,t){},1342:function(e,t,n){"use strict";n(1301),n(1343)},1343:function(e,t){},1345:function(e,t,n){"use strict";n(1301),n(1346),n(1316)},1346:function(e,t){},1348:function(e,t,n){"use strict";n(1301),n(1349)},1349:function(e,t){},1351:function(e,t,n){"use strict";n(1301),n(1352),n(1354),n(1328)},1352:function(e,t){},1354:function(e,t,n){"use strict";n(1301),n(1355),n(1328)},1355:function(e,t){},1357:function(e,t,n){"use strict";n(1301)},1358:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):o(e,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=(n(1316),n(359)),s=r(l),c=(n(1328),n(342)),f=r(c),d=(n(1354),n(274)),p=r(d),m=(n(1310),n(633)),y=r(m),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=n(90),v=r(b),g=n(1233),O=n(1287),w=n(1359),E=r(w),k={1:[{id:"1",value:"工单中心"},{id:"2",value:"消息中心"},{id:"3",value:"文档中心"},{id:"4",value:"帮助中心"}],2:[{id:"6",value:"查询问题"}]},P=function(e){function t(){a(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={selectedModule:"1",selectedSubModule:"1",subModules:k["1"],title:"",desc:""},e.setModule=e.setModule.bind(e),e.setSubModule=e.setSubModule.bind(e),e.setTitle=e.setTitle.bind(e),e.setDesc=e.setDesc.bind(e),e.handleSubmit=e.handleSubmit.bind(e),e}return i(t,e),h(t,[{key:"setModule",value:function(e){this.setState({selectedModule:e,subModules:k[e]})}},{key:"setSubModule",value:function(e){this.setState({selectedSubModule:e})}},{key:"setTitle",value:function(e){this.setState({title:e.target.value})}},{key:"setDesc",value:function(e){this.setState({desc:e.target.value})}},{key:"handleSubmit",value:function(){var e=this.state.title.replace(/^\s*|\s*$/g,"");e.length?(0,O.Request)("/homeapi/workorder/createWo",{method:"POST",headers:{"Content-Type":"application/json"},body:{module:this.state.selectedModule,subModule:this.state.selectedSubModule,title:e,description:this.state.desc.replace(/^\s*|\s*$/g,""),phoneNumber:"13313313333",email:"",imageInfo:"[]",fileInfo:""}}).then(function(e){(0,O.resolve)(e,function(e){y.default.success(e),setTimeout(function(){g.browserHistory.push("/form/formSearch")},1e3)},function(e){y.default.error(e)})}):y.default.error("标题不能为空")}},{key:"renderSubModules",value:function(e){return e.map(function(e){return v.default.createElement(p.default.Option,{value:e.id,key:e.id},e.value)})}},{key:"render",value:function(){return v.default.createElement("div",{className:"form-submit"},v.default.createElement("div",{className:"form-submit-title"},"表单提交"),v.default.createElement("div",{className:"form-submit-content"},v.default.createElement("div",{className:"form-submit-subtitle"},v.default.createElement(E.default,null),"表单标题："),v.default.createElement("div",{className:"form-submit-form"},v.default.createElement(f.default,{style:{width:200},placeholder:"标题长度不超过30字",value:this.state.title,onChange:this.setTitle,maxLength:"30"})),v.default.createElement("div",{className:"form-submit-subtitle"},v.default.createElement(E.default,null),"表单类型："),v.default.createElement("div",{className:"form-submit-form"},v.default.createElement(p.default,{value:this.state.selectedModule,onChange:this.setModule,style:{width:200,marginRight:20}},v.default.createElement(p.default.Option,{value:"1",key:"1"},"WEB门户"),v.default.createElement(p.default.Option,{value:"2",key:"2"},"数据仓库(HIVE)")),v.default.createElement(p.default,{value:this.state.selectedSubModule,onChange:this.setSubModule,style:{width:200}},this.renderSubModules(this.state.subModules))),v.default.createElement("div",{className:"form-submit-subtitle"},"表单描述："),v.default.createElement("div",{className:"form-submit-textarea"},v.default.createElement(f.default,{type:"textarea",rows:8,onChange:this.setDesc
})),v.default.createElement("div",{className:"form-submit-btnGroup"},v.default.createElement(s.default,{type:"primary",onClick:this.handleSubmit},"提交"),v.default.createElement(s.default,null,"取消"))))}}]),t}(v.default.Component);t.default=P},1359:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return u.default.createElement("span",{style:{color:"#ff0000",width:"6px",marginLeft:"-6px"}},"*")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(90),u=r(a)},1360:function(e,t){},1362:function(e,t){},1368:function(e,t){},1370:function(e,t){},1372:function(e,t){}});